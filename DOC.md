# 项目技术文档

## 1. 技术选型

技术选型： **JavaScript + React + localStorage** 

**JavaScript (ES6+)**

- JavaScript 拥有最庞大的前端生态系统，npm 仓库包含数百万个包
- 无需编译步骤（开发环境），修改代码即可在浏览器实时看到效果，开发效率高
- 所有现代浏览器都内置 JavaScript 引擎，无需额外运行时环境

**React 19.2.0**

- 将 UI 拆分为独立、可复用的组件（如 `TodoItem`、`CategoryManager`、`FilterBar`、`ConfirmDialog` ），代码结构清晰，易于维护和扩展
- 使用 `useState`、`useEffect`、`useMemo`、`useRef` 等 Hooks 管理状态和副作用，代码组织更灵活
- 数据流向清晰，便于调试和状态管理

**localStorage **

- 无需在本地额外安装数据库，降低管理成本，纯前端解决方案，无需后端服务器，部署简单
- 数据存储在本地，读写速度快，无网络延迟
- 对于待办事项这种个人数据，localStorage 的存储容量（通常 5-10MB）完全足够

## 2. 项目结构

### 架构概述

本项目采用**纯前端架构**，不包含后端服务器和数据库服务器。整个应用运行在用户的浏览器中，数据存储在浏览器的 localStorage 中。

### 目录结构

```
todo-list/
├── public/                
│   ├── index.html         # html
│   └── todo_list.svg      # 应用图标
│
├── src/                    # 源代码目录
│   ├── components/     
│   │   ├── TodoItem.js           # 待办事项
│   │   ├── CategoryManager.js    # 分类管理
│   │   ├── FilterBar.js          # 筛选栏
|   |   └── ConfirmDialog.js      # 确认删除弹窗
│   │
│   │
│   ├── App.js             # 根组件
│   ├── App.css            # 样式
│   ├── index.js           # 应用入口文件
│   ├── index.css          # 全局样式文件
│   ├── constants.js       # 常量
│   ├── storage.js         # 数据存储
│
├── package.json           # 项目依赖配置
├── package-lock.json      # 依赖版本锁定文件
├── README.md             # 项目说明文档
└── DOC.md                # 项目技术文档
```

## 3. 功能说明

-  ***输入字段及验证***：标题--必填；描述--可选；优先级--必选（默认：中）；分类--必选（默认：工作）；截止日期--默认为当前时间

  1. **标题字段（必填）：**

     - 在表单中使用 HTML5 `required` 属性进行浏览器原生验证

     - 在提交处理函数 `handleAddTodo` 中进行二次验证：

       ```javascript
       const trimmedTitle = title.trim(); // 去除空格
       if (!trimmedTitle || !categoryId) {
         return; // 如果标题为空或分类未选择，直接返回，不添加待办事项
       }
       ```

  2. **描述字段（可选）：**

     - 描述字段没有 `required` 属性

     - 在显示时，只有当描述存在且不为空时才渲染描述内容：

       ```javascript
       {todo.description && <p>{todo.description}</p>}
       ```

  3. **其他字段：**

     - **优先级**：有默认值（中等优先级），不会为空
     - **分类**：必填，通过下拉选择，有默认分类（工作）
     - **截止日期**：可选，如果为空则使用当前时间作为默认值


- ***已完成/未完成/已到期任务的显示方式***
  1. **已完成显示：**
     - 已完成任务的切换按钮文字变为"标记未完成"
     - 背景色->#f0fff4
     - 标题和描述添加删除线样式，明确表示任务已完成
     - 未完成任务显示"标记完成"
  2. **已到期显示：**
     - 对于已过期但未完成的任务，会添加 `expired` 类名，置灰
     - 已完成的任务即使过期也不会显示过期样式


- ***任务排序***：系统提供 **6 种排序模式**（**注**：出现相同则按时间倒序排列；对于没有截止时间的任务，使用创建时间作为排序依据），用户可以通过下拉选择框切换：
  - 时间：新 → 旧（默认）
  - 时间：旧 → 新
  - 优先级：高 → 低
  - 优先级：低 → 高
  - 截止时间：晚 → 早
  - 截止时间：早 → 晚

- ***提醒/通知***：使用 `useEffect` 和 `setInterval` 实现定时检查（60s）；只提醒**未完成/有截止时间/未提醒过/5min内到期**的任务


- ***数据持久化***：所有数据自动保存到浏览器本地存储；刷新页面/跨页面后数据不丢失


- ***任务分类***：支持为待办事项添加分类（默认分类：工作/学习/生活）；支持自定义/默认分类的增删改（删除后相关任务标记为"未分类"）


- ***搜索功能***：支持按标题和描述搜索；实时搜索（输入即搜索）；不区分大小写；支持部分匹配（包含关键词即可）


- ***筛选功能***：按**分类**筛选：可以筛选特定分类的任务；按**状态**筛选：可以筛选已完成或待完成的任务；按**截止时间**筛选：今天截止/一周内截止/已过期

## 4. AI应用

1. 使用的AI工具：**Gemini 3/Cursor**
2. 如何使用AI：代码片段生成/CSS样式编写（手动修改）
3. 修改AI输出：Cursor输出采用window.alert/confirm提示，实际采用组件封装弹窗，尽量提升用户体验

## 5. 部署与运行说明

### 5.1 本地运行方式

1. **进入项目目录：**
   ```
   cd todo-list
   ```

2. **安装项目依赖：**
   ```
   npm install
   ```

3. **启动命令**：

   ```
   npm start
   ```

- 访问地址： `http://localhost:3000`，端口被占用时会自动重定向；代码修改后会自动热更新，页面会自动刷新


- 在vscode终端中按 `Ctrl + C`（Windows/Linux）或 `Cmd + C`（macOS）

### 5.2 已测试过的环境

本项目已在以下环境中测试通过：

| 操作系统       | 浏览器                 | 状态   |
| ---------- | ------------------- | ---- |
| Windows 11 | Chrome 142+         | 正常   |
| Windows 11 | Microsoft Edge 142+ | 正常   |

### 5.3 不足

- 功能限制
  1. 不支持直接编辑已创建的待办事项
  2. 删除任务后无法恢复
  3. 无法批量删除或批量标记完成


- 提醒功能限制
  1. 使用 `window.alert()` 弹窗提醒，会阻塞浏览器操作
  2. 提醒功能只在页面打开时有效，关闭页面后无法提醒


- 数据存储限制
  1. 数据仅存储在本地浏览器，无法跨设备同步


- 安全性问题
  1. 用户输入的内容直接渲染到页面，可能存在 XSS 攻击风险（只采用React框架默认转义）
  2. localStorage 中的数据以明文形式存储

## 6. 总结与反思

### 6.1 可能的改进

1. 改进提醒通知系统

- 使用 Notification API：替代 `window.alert()`，实现非阻塞的桌面通知（实际上，已经尝试使用window.Notification API，但失效）
- 自定义提醒时间：允许用户设置提前提醒时间（如提前 1 小时、1 天等）

2. 批量操作功能

- 添加复选框，支持多选任务
  - 批量标记完成/未完成
  - 批量删除
  - 批量修改分类
  - 批量修改优先级

3. 虚拟滚动

- 当任务数量过多时，渲染所有 DOM 节点会导致性能问题；只渲染视口区域的任务，滚动时动态加载

### 6.2 亮点

- 采用纯前端架构，无需后端服务器，部署简单，成本为零


- 利用 React Hooks 的特性，如使用 useRef 避免不必要的重渲染，使用 useMemo 优化排序性能等


- 实现了筛选、排序、搜索的组合


- 实现了任务提醒功能：定时检查（每 60 秒），避免重复提醒（使用 useRef 存储已提醒 ID）

